# 10주차 스레드

# Thread 클래스와 Runnable 인터페이스

- Thread 클래스 확장
    - run() 메서드 오버라이드
- Runnable 인터페이스 구현
    - run() 메서드 오버라이드

두 방법의 큰 차이는 다중상속 여부 

# 쓰레드의 상태

스레드 객체를 생성하고 start() 메서드를 호출하면 스레드는 실행 대기 상태가 된다

`실행 대기 상태` : 아직 스케줄링 되지 않아서 실행을 기다리고 있는 상태 

Running

실행대기 스레드 중에서 스레드 스케줄링으로 선택된 스레드가 CPU를 점유하고 run()메서드를 실행하는 상태 

실행 상태의 스레드는 run()메서드를 모두 실행하기 전에 스레드 스케줄링에 의해 다시 실행대기 상태로 돌아갈 수 있다. 그리고 실행대기 상태에 있는 다른 스레드가 선택되어 실행상태가 된다 

실행대기상태, 실행 상태를 번갈아가며 자신의 run()메서드를 조금씩 실행한다.  

실행종료

run()메서드가 종료되면 더 이상 실행할 코드가 없기 때문에 스레드의 실행은 멈춘다

이 상태를 종료상태 

스레드가 실행상태에서 실행 대기가 아닌 일시정지상태로 가기도 한다 

- **일시 정지 상태:** 스레드가 실행할 수 없는 상태다.

- 일시 정지 상태의 종류: WAITING, TIMED_WAITING, BLOCKED

# 스레드 상태 제어

interrupt

일시정지 상태의 스레드에 InterruptedException 예외를 발생시켜 

예외처리 코드(catch)에서 실행대기 상태로 가거나 종료 상태로 갈 수 있도록 한다 

notify()

notifyAll()

동기화 블록 내에서 wait() 메소드에 의해 일시 정지 상태에 있는 스레드를 실행 대기 상태로 만든다.

sleep(long millis)

sleep(long millis, int nanos)

주어진 시간 동안 스레드를 일시 정지 상태로 만든다. 주어진 시간이 지나면 자동적으로 실행 대기 상태가 된다.

join()

join(long millis)

join(long millis, int nanos)

join() 메소드를 호출한 스레드는 일시 정지 상태가 된다. 실행 대기 상태로 가려면 join() 메소드를 멤버로 가지는 스레드가 종료되거나, 매개값으로 주어진 시간이 지나야 한다.

wait()

wait(long millis)

wait(long millis, int nanos)

동기화(synchronized) 블록 내에서 스레드를 일시 정지 상태로 만든다. 매개값으로 주어진 시간이 지나면 자동적으로 실행 대기 상태가 된다. 시간이 주어지지 않으면 notify(), notifyAll() 메소드에 의해 실행 대기 상태로 갈 수 있다.

yield()

실행 중에 우선순위가 동일한 다른 스레드에게 실행을 양보하고, 실행 대기 상태가 된다.

# 쓰레드의 우선순위

# Main 쓰레드

# 동기화

멀티 쓰레드 프로그래밍에서 동기화 작업이 필수입니다. 쓰레드 동기화란 여러 쓰레드가 동일한 리소스를 공유하여 사용하게 되면 서로의 결과에 영향을 주기 때문에 방지하는 기법입니다.

### synchronized를 이용한 동기화

자바에서는 **synchronized** 키워드를 사용하여 임계영역을 지정하여 동시에 공유자원을 차지하지 않도록 강제합니다. synchronized를 사용하는 방법을 메소드 자체에 적용하거나, 코드 블록에 적용할 수 있습니다.

- **메소드 전체를 임계영역을 지정** : 메소드 선언 시에 synchronized 키워드 추가, 이 메소드가 호출되면 메소드를 가지고 있는 객체에 대한 락을 획득하여 작업을 수행하다가 메소드 종료되면 락을 반납합니다.
- **특정 영역만 임계영역을 지정** : synchronized 키워드로 시작하는 블록으로 지정, 특정 객체를 지정하여 블록 내에서 객체에 대한 락을 획득하고 블록을 벗어나면 락을 반납합니다.

# 데드락
